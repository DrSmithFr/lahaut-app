<form
  [ngClass]="{'shake-on-error form-error': shaking && loginForm.invalid}"
  [formGroup]="loginForm"
  (ngSubmit)="onSubmit()">
  <mat-form-field class="full-width">
    <mat-label>Email</mat-label>
    <input
      matInput
      required
      autofocus
      type="text"
      formControlName="username"
      autocomplete="email"
      tabindex="1">
    <mat-icon matPrefix>mail</mat-icon>
    <mat-error *ngIf="hasError(getUsername())">
      Entre ton email !
    </mat-error>
  </mat-form-field>

  <mat-form-field class="full-width password-field">
    <mat-label>Mot de passe</mat-label>
    <input
      matInput
      required
      #password
      [type]="hidePassword ? 'password' : 'text'"
      formControlName="password"
      autocomplete="password"
      tabindex="2">
    <mat-icon matPrefix>key</mat-icon>
    <button
      mat-icon-button
      matSuffix
      tabindex="-1"
      (click)="hidePassword = !hidePassword" [attr.aria-label]="'Hide password'"
      [attr.aria-pressed]="hidePassword">
      <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
    </button>
    <mat-error *ngIf="hasError(getPassword())">
      Entre ton mot de passe !
    </mat-error>
  </mat-form-field>

  <div class="center">
    <button
      *ngIf="!showLoader"
      [disabled]="loginForm.invalid"
      mat-flat-button
      color="primary"
      type="submit"
      tabindex="3">
      Connexion
    </button>
    <mat-spinner
      *ngIf="showLoader"
      diameter="37"
      style="margin: 0 auto">
    </mat-spinner>
  </div>

  <p class="forgot-password">
    <a (click)="openPasswordResetRequestDialog()">Mot de passe oubli√© ?</a>
  </p>
</form>
